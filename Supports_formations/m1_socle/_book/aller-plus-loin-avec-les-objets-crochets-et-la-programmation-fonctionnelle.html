<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapitre 9 Aller plus loin avec les objets, crochets et la programmation fonctionnelle | Découvrir R et RStudio</title>
  <meta name="description" content="Formation R socle">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapitre 9 Aller plus loin avec les objets, crochets et la programmation fonctionnelle | Découvrir R et RStudio" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Formation R socle" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 9 Aller plus loin avec les objets, crochets et la programmation fonctionnelle | Découvrir R et RStudio" />
  
  <meta name="twitter:description" content="Formation R socle" />
  

<meta name="author" content="Groupe des référents R">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="sauvegarder-son-travail.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.7.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotlyjs-1.29.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotlyjs-1.29.2/plotly-latest.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Débuter avec R et Rstudio</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#le-parcours-de-formation"><i class="fa fa-check"></i><b>1.1</b> Le parcours de formation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#objectifs-du-module"><i class="fa fa-check"></i><b>1.2</b> Objectifs du module</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-son-ecosysteme-et-ses-possibilites.html"><a href="r-son-ecosysteme-et-ses-possibilites.html"><i class="fa fa-check"></i><b>2</b> R, son écosystème et ses possibilités</a><ul>
<li class="chapter" data-level="2.1" data-path="r-son-ecosysteme-et-ses-possibilites.html"><a href="r-son-ecosysteme-et-ses-possibilites.html#le-groupe-de-referents"><i class="fa fa-check"></i><b>2.1</b> Le groupe de référents</a></li>
<li class="chapter" data-level="2.2" data-path="r-son-ecosysteme-et-ses-possibilites.html"><a href="r-son-ecosysteme-et-ses-possibilites.html#r-cest-quoi"><i class="fa fa-check"></i><b>2.2</b> R c’est quoi ?</a></li>
<li class="chapter" data-level="2.3" data-path="r-son-ecosysteme-et-ses-possibilites.html"><a href="r-son-ecosysteme-et-ses-possibilites.html#un-peu-dhistoire"><i class="fa fa-check"></i><b>2.3</b> Un peu d’histoire</a></li>
<li class="chapter" data-level="2.4" data-path="r-son-ecosysteme-et-ses-possibilites.html"><a href="r-son-ecosysteme-et-ses-possibilites.html#un-logiciel-libre"><i class="fa fa-check"></i><b>2.4</b> Un logiciel libre</a></li>
<li class="chapter" data-level="2.5" data-path="r-son-ecosysteme-et-ses-possibilites.html"><a href="r-son-ecosysteme-et-ses-possibilites.html#que-peut-on-faire-avec-r"><i class="fa fa-check"></i><b>2.5</b> Que peut-on faire avec R ?</a></li>
<li class="chapter" data-level="2.6" data-path="r-son-ecosysteme-et-ses-possibilites.html"><a href="r-son-ecosysteme-et-ses-possibilites.html#un-logiciel-modulaire"><i class="fa fa-check"></i><b>2.6</b> Un logiciel modulaire</a></li>
<li class="chapter" data-level="2.7" data-path="r-son-ecosysteme-et-ses-possibilites.html"><a href="r-son-ecosysteme-et-ses-possibilites.html#des-exemples-de-ce-quon-peut-faire-avec-r"><i class="fa fa-check"></i><b>2.7</b> Des exemples de ce qu’on peut faire avec R :</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="presentation-de-linterface-et-premieres-manipulations.html"><a href="presentation-de-linterface-et-premieres-manipulations.html"><i class="fa fa-check"></i><b>3</b> Présentation de l’interface et premières manipulations</a><ul>
<li class="chapter" data-level="3.1" data-path="presentation-de-linterface-et-premieres-manipulations.html"><a href="presentation-de-linterface-et-premieres-manipulations.html#une-interface-particuliere-rstudio"><i class="fa fa-check"></i><b>3.1</b> Une interface particulière : RStudio</a></li>
<li class="chapter" data-level="3.2" data-path="presentation-de-linterface-et-premieres-manipulations.html"><a href="presentation-de-linterface-et-premieres-manipulations.html#session-et-repertoire-de-travail"><i class="fa fa-check"></i><b>3.2</b> Session et répertoire de travail</a></li>
<li class="chapter" data-level="3.3" data-path="presentation-de-linterface-et-premieres-manipulations.html"><a href="presentation-de-linterface-et-premieres-manipulations.html#exercice"><i class="fa fa-check"></i><b>3.3</b> Exercice</a></li>
<li class="chapter" data-level="3.4" data-path="presentation-de-linterface-et-premieres-manipulations.html"><a href="presentation-de-linterface-et-premieres-manipulations.html#prise-en-main-de-la-console"><i class="fa fa-check"></i><b>3.4</b> Prise en main de la console</a></li>
<li class="chapter" data-level="3.5" data-path="presentation-de-linterface-et-premieres-manipulations.html"><a href="presentation-de-linterface-et-premieres-manipulations.html#creation-dune-variable"><i class="fa fa-check"></i><b>3.5</b> Création d’une variable</a></li>
<li class="chapter" data-level="3.6" data-path="presentation-de-linterface-et-premieres-manipulations.html"><a href="presentation-de-linterface-et-premieres-manipulations.html#exercice-1"><i class="fa fa-check"></i><b>3.6</b> Exercice</a></li>
<li class="chapter" data-level="3.7" data-path="presentation-de-linterface-et-premieres-manipulations.html"><a href="presentation-de-linterface-et-premieres-manipulations.html#utilite-des-scripts"><i class="fa fa-check"></i><b>3.7</b> Utilité des scripts</a></li>
<li class="chapter" data-level="3.8" data-path="presentation-de-linterface-et-premieres-manipulations.html"><a href="presentation-de-linterface-et-premieres-manipulations.html#exercice-utiliser-un-script"><i class="fa fa-check"></i><b>3.8</b> Exercice : utiliser un script</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mon-premier-jeu-de-donnees.html"><a href="mon-premier-jeu-de-donnees.html"><i class="fa fa-check"></i><b>4</b> Mon premier jeu de données</a><ul>
<li class="chapter" data-level="4.1" data-path="mon-premier-jeu-de-donnees.html"><a href="mon-premier-jeu-de-donnees.html#les-types-de-valeurs-dans-r"><i class="fa fa-check"></i><b>4.1</b> Les types de valeurs dans R</a></li>
<li class="chapter" data-level="4.2" data-path="mon-premier-jeu-de-donnees.html"><a href="mon-premier-jeu-de-donnees.html#avant-de-manipuler-le-data.frame-installer-et-charger-un-package"><i class="fa fa-check"></i><b>4.2</b> Avant de manipuler le data.frame : installer et charger un package</a></li>
<li class="chapter" data-level="4.3" data-path="mon-premier-jeu-de-donnees.html"><a href="mon-premier-jeu-de-donnees.html#importation-de-donnees"><i class="fa fa-check"></i><b>4.3</b> Importation de données</a></li>
<li class="chapter" data-level="4.4" data-path="mon-premier-jeu-de-donnees.html"><a href="mon-premier-jeu-de-donnees.html#structure-des-donnees-le-dataframe"><i class="fa fa-check"></i><b>4.4</b> Structure des données : le <em>dataframe</em></a></li>
<li class="chapter" data-level="4.5" data-path="mon-premier-jeu-de-donnees.html"><a href="mon-premier-jeu-de-donnees.html#gerer-le-type-des-variables"><i class="fa fa-check"></i><b>4.5</b> Gérer le type des variables</a></li>
<li class="chapter" data-level="4.6" data-path="mon-premier-jeu-de-donnees.html"><a href="mon-premier-jeu-de-donnees.html#les-valeurs-particulieres"><i class="fa fa-check"></i><b>4.6</b> Les valeurs particulières</a></li>
<li class="chapter" data-level="4.7" data-path="mon-premier-jeu-de-donnees.html"><a href="mon-premier-jeu-de-donnees.html#exercice-importer-les-donnees-et-premier-coup-doeil"><i class="fa fa-check"></i><b>4.7</b> Exercice : Importer les données et premier coup d’oeil</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="premiere-manipulation-des-donnees.html"><a href="premiere-manipulation-des-donnees.html"><i class="fa fa-check"></i><b>5</b> Première manipulation des données</a><ul>
<li class="chapter" data-level="5.1" data-path="premiere-manipulation-des-donnees.html"><a href="premiere-manipulation-des-donnees.html#afficher-les-valeurs-et-manipuler-les-variables"><i class="fa fa-check"></i><b>5.1</b> Afficher les valeurs et manipuler les variables</a></li>
<li class="chapter" data-level="5.2" data-path="premiere-manipulation-des-donnees.html"><a href="premiere-manipulation-des-donnees.html#creer-de-nouvelles-variables"><i class="fa fa-check"></i><b>5.2</b> Créer de nouvelles variables</a></li>
<li class="chapter" data-level="5.3" data-path="premiere-manipulation-des-donnees.html"><a href="premiere-manipulation-des-donnees.html#selectionner-des-variables"><i class="fa fa-check"></i><b>5.3</b> Sélectionner des variables</a></li>
<li class="chapter" data-level="5.4" data-path="premiere-manipulation-des-donnees.html"><a href="premiere-manipulation-des-donnees.html#filtrer-des-observations"><i class="fa fa-check"></i><b>5.4</b> Filtrer des observations</a></li>
<li class="chapter" data-level="5.5" data-path="premiere-manipulation-des-donnees.html"><a href="premiere-manipulation-des-donnees.html#les-tests-logiques-dans-r"><i class="fa fa-check"></i><b>5.5</b> Les tests logiques dans R</a></li>
<li class="chapter" data-level="5.6" data-path="premiere-manipulation-des-donnees.html"><a href="premiere-manipulation-des-donnees.html#renommer-des-colonnes"><i class="fa fa-check"></i><b>5.6</b> Renommer des colonnes</a></li>
<li class="chapter" data-level="5.7" data-path="premiere-manipulation-des-donnees.html"><a href="premiere-manipulation-des-donnees.html#exercice-creer-filtrer-selectionner"><i class="fa fa-check"></i><b>5.7</b> Exercice : Créer, filtrer, sélectionner</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="premiers-traitements-statistiques.html"><a href="premiers-traitements-statistiques.html"><i class="fa fa-check"></i><b>6</b> Premiers traitements statistiques</a><ul>
<li class="chapter" data-level="6.1" data-path="premiers-traitements-statistiques.html"><a href="premiers-traitements-statistiques.html#obtenir-des-informations"><i class="fa fa-check"></i><b>6.1</b> Obtenir des informations</a></li>
<li class="chapter" data-level="6.2" data-path="premiers-traitements-statistiques.html"><a href="premiers-traitements-statistiques.html#calculer-des-statistiques-specifiques"><i class="fa fa-check"></i><b>6.2</b> Calculer des statistiques spécifiques</a></li>
<li class="chapter" data-level="6.3" data-path="premiers-traitements-statistiques.html"><a href="premiers-traitements-statistiques.html#agreger-des-donnees"><i class="fa fa-check"></i><b>6.3</b> Agréger des données</a><ul>
<li class="chapter" data-level="6.3.1" data-path="premiers-traitements-statistiques.html"><a href="premiers-traitements-statistiques.html#globalement"><i class="fa fa-check"></i><b>6.3.1</b> Globalement</a></li>
<li class="chapter" data-level="6.3.2" data-path="premiers-traitements-statistiques.html"><a href="premiers-traitements-statistiques.html#selon-un-facteur"><i class="fa fa-check"></i><b>6.3.2</b> Selon un facteur</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="premiers-traitements-statistiques.html"><a href="premiers-traitements-statistiques.html#tableau-de-contingence"><i class="fa fa-check"></i><b>6.4</b> Tableau de contingence</a></li>
<li class="chapter" data-level="6.5" data-path="premiers-traitements-statistiques.html"><a href="premiers-traitements-statistiques.html#tableau-de-proportions"><i class="fa fa-check"></i><b>6.5</b> Tableau de proportions</a></li>
<li class="chapter" data-level="6.6" data-path="premiers-traitements-statistiques.html"><a href="premiers-traitements-statistiques.html#exercice-calcul-de-statistiques"><i class="fa fa-check"></i><b>6.6</b> Exercice : calcul de statistiques</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="premiers-graphiques.html"><a href="premiers-graphiques.html"><i class="fa fa-check"></i><b>7</b> Premiers graphiques</a><ul>
<li class="chapter" data-level="7.1" data-path="premiers-graphiques.html"><a href="premiers-graphiques.html#package-ggplot2"><i class="fa fa-check"></i><b>7.1</b> Package ggplot2</a></li>
<li class="chapter" data-level="7.2" data-path="premiers-graphiques.html"><a href="premiers-graphiques.html#histogramme"><i class="fa fa-check"></i><b>7.2</b> Histogramme</a></li>
<li class="chapter" data-level="7.3" data-path="premiers-graphiques.html"><a href="premiers-graphiques.html#nuages-de-points"><i class="fa fa-check"></i><b>7.3</b> Nuages de points</a></li>
<li class="chapter" data-level="7.4" data-path="premiers-graphiques.html"><a href="premiers-graphiques.html#matrice-de-nuages"><i class="fa fa-check"></i><b>7.4</b> Matrice de nuages</a></li>
<li class="chapter" data-level="7.5" data-path="premiers-graphiques.html"><a href="premiers-graphiques.html#bonus-faire-un-graphique-dynamique"><i class="fa fa-check"></i><b>7.5</b> Bonus : faire un graphique “dynamique”</a></li>
<li class="chapter" data-level="7.6" data-path="premiers-graphiques.html"><a href="premiers-graphiques.html#exercices-creer-des-graphiques"><i class="fa fa-check"></i><b>7.6</b> Exercices : créer des graphiques</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="sauvegarder-son-travail.html"><a href="sauvegarder-son-travail.html"><i class="fa fa-check"></i><b>8</b> Sauvegarder son travail</a><ul>
<li class="chapter" data-level="8.1" data-path="sauvegarder-son-travail.html"><a href="sauvegarder-son-travail.html#exportation-des-resultats"><i class="fa fa-check"></i><b>8.1</b> Exportation des résultats</a></li>
<li class="chapter" data-level="8.2" data-path="sauvegarder-son-travail.html"><a href="sauvegarder-son-travail.html#environnement-et-rdata"><i class="fa fa-check"></i><b>8.2</b> Environnement et RData</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><i class="fa fa-check"></i><b>9</b> Aller plus loin avec les objets, crochets et la programmation fonctionnelle</a><ul>
<li class="chapter" data-level="9.1" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#les-objets-dans-r"><i class="fa fa-check"></i><b>9.1</b> Les objets dans R</a><ul>
<li class="chapter" data-level="9.1.1" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#creer-des-vecteurs"><i class="fa fa-check"></i><b>9.1.1</b> Créer des vecteurs</a></li>
<li class="chapter" data-level="9.1.2" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#creer-une-matrice"><i class="fa fa-check"></i><b>9.1.2</b> Créer une matrice</a></li>
<li class="chapter" data-level="9.1.3" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#visualiser-ces-objets-et-leurs-attributs"><i class="fa fa-check"></i><b>9.1.3</b> Visualiser ces objets et leurs attributs</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#selectionner-des-lignes-et-des-colonnes"><i class="fa fa-check"></i><b>9.2</b> Sélectionner des lignes et des colonnes</a></li>
<li class="chapter" data-level="9.3" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#creer-une-nouvelle-fonction-en-r"><i class="fa fa-check"></i><b>9.3</b> Créer une nouvelle fonction en R</a></li>
<li class="chapter" data-level="9.4" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#les-boucles-conditionnelles"><i class="fa fa-check"></i><b>9.4</b> Les boucles conditionnelles</a></li>
<li class="chapter" data-level="9.5" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#les-boucles"><i class="fa fa-check"></i><b>9.5</b> Les boucles</a></li>
<li class="chapter" data-level="9.6" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#exercices"><i class="fa fa-check"></i><b>9.6</b> Exercices</a><ul>
<li class="chapter" data-level="9.6.1" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#vecteurs-simples"><i class="fa fa-check"></i><b>9.6.1</b> Vecteurs simples</a></li>
<li class="chapter" data-level="9.6.2" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#dataframes-et-listes"><i class="fa fa-check"></i><b>9.6.2</b> Dataframes et listes</a></li>
<li class="chapter" data-level="9.6.3" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#pour-aller-plus-loin-matrices-et-arrays"><i class="fa fa-check"></i><b>9.6.3</b> Pour aller plus loin : matrices et arrays</a></li>
<li class="chapter" data-level="9.6.4" data-path="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html"><a href="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle.html#inspection-dun-objet-la-regression"><i class="fa fa-check"></i><b>9.6.4</b> Inspection d’un objet : la régression</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Découvrir R et RStudio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="aller-plus-loin-avec-les-objets-crochets-et-la-programmation-fonctionnelle" class="section level1">
<h1><span class="header-section-number">Chapitre 9</span> Aller plus loin avec les objets, crochets et la programmation fonctionnelle</h1>
<p>Ce qui a été présenté dans ce module reposer sur les fonctions du package <code>tidyverse</code>. Cette approche tend à se généraliser depuis quelques années, mais quand on cherche la réponse à un problème sur Internet, on trouve d’autres façons de programmer en R, qui appellent aux éléments du package <code>base</code> et non du <code>tidyverse</code> <span class="math inline">\(\rightarrow\)</span> Cete partie donne quelques clés de compréhension.</p>
<div id="les-objets-dans-r" class="section level2">
<h2><span class="header-section-number">9.1</span> Les objets dans R</h2>
<p>Rappel : en informatique, un objet est défini par : ses <em>attributs</em> et ses <em>méthodes</em> (fonctions). On prend l’exemple du jeu d’échec : chaque pièce peut-être vue comme un objet :</p>
<ul>
<li>sa position sur le plateau constitue ses attributs</li>
<li>sa façon de se déplacer peut-être vue comme une fonction qui ne s’applique qu’à ce type de pièce, donc une méthode</li>
</ul>
<p>R est un langage orienté objet ; ces objets permettent de structurer les données selon leurs caractéristiques <span class="math inline">\(\rightarrow\)</span> on retrouve les données dans les attributs. Les méthodes sont en général transparentes pour l’utilisateur (cf utilisation des fonctions <code>summary</code>, <code>plot</code>…). Les objets les plus courants sont les suivants :</p>
<ul>
<li><strong>Vecteurs</strong> : suite unidimensionnelle de <strong>valeurs</strong> ayant le même type.</li>
<li><strong>Facteurs</strong> : vecteur qui prend un nombre limité de modalités (exemple : sexe). Il est défini par les niveaux (<em>levels</em>) et les libellés associés (<em>labels</em>)</li>
<li><strong>Matrice</strong> et <strong>arrays</strong> : suites multidimensionnelles de <strong>valeurs</strong> (matrices=dimension 2 ; array=dimension n)</li>
<li><p><strong>Liste</strong> : ensemble d’<strong>objets</strong> différents. On peut stocker un vecteur alphanumérique avec matrice numérique dans une liste</p></li>
<li><strong>Tableaux</strong> (data.frame) : Objet qui ressemble le plus aux tables Excel, SAS ou SPSS… : description d’individus statistiques (observations, en ligne) par des caractéristiques (variables, en colonnes)</li>
<li><strong>Fonctions</strong> : Objets particuliers qui donnent un <em>résultat</em> à partir de paramètres en entrée. Cela sera au programme d’un autre module de formation.</li>
<li><strong>Autres objets</strong> : Il existe un très grand nombre d’objets <em>ad hoc</em> dans R. Par exemple
<ul>
<li><em>ts</em> (time serie) pour les séries temporelles,</li>
<li><em>lm</em> (linear model) qui contient tous les résultats d’une régression linéraire…</li>
<li>On peut même en définir de nouveaux soi-même !</li>
</ul></li>
</ul>
<p>On utilise <code>&lt;-</code> ou <code>=</code> pour stocker un objet. La fonction <code>c</code> permet de lister simplement les valeurs que l’on veut stocker dans l’objet ; la fonction <code>seq</code> génére une suite incrémentée. Il existe aussi la fonction <code>rep</code> qui réplique n fois la même valeur.</p>
<div id="creer-des-vecteurs" class="section level3">
<h3><span class="header-section-number">9.1.1</span> Créer des vecteurs</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v1 &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span> <span class="op">:</span><span class="st"> </span><span class="dv">10</span>)
v2 &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">&quot;lundi&quot;</span>, <span class="st">&quot;mardi&quot;</span>, <span class="st">&quot;mercredi&quot;</span>, <span class="st">&quot;jeudi&quot;</span>,
        <span class="st">&quot;vendredi&quot;</span>, <span class="st">&quot;samedi&quot;</span>, <span class="st">&quot;dimanche&quot;</span>)</code></pre></div>
</div>
<div id="creer-une-matrice" class="section level3">
<h3><span class="header-section-number">9.1.2</span> Créer une matrice</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">matrix</span> (v1, <span class="dt">nrow =</span> <span class="dv">10</span>, <span class="dt">ncol =</span> <span class="dv">7</span>)
l &lt;-<span class="st"> </span><span class="kw">list</span> (v1, v2, m)</code></pre></div>
</div>
<div id="visualiser-ces-objets-et-leurs-attributs" class="section level3">
<h3><span class="header-section-number">9.1.3</span> Visualiser ces objets et leurs attributs</h3>
<p>Quelques fonctions simples : <code>print</code>, <code>View</code>, <code>names</code>, <code>colnames</code>, <code>rownames</code>, <code>typeof</code>, <code>str</code>, <code>dim</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v1</code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span> (v2)</code></pre></div>
<pre><code>## [1] &quot;lundi&quot;    &quot;mardi&quot;    &quot;mercredi&quot; &quot;jeudi&quot;    &quot;vendredi&quot; &quot;samedi&quot;  
## [7] &quot;dimanche&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span> (v2) <span class="co"># Permet de visualiser le type </span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span> (m)</code></pre></div>
<pre><code>## [1] 10  7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span> (l)    <span class="co"># Permet de visualiser les attributs </span></code></pre></div>
<pre><code>## List of 3
##  $ : int [1:10] 1 2 3 4 5 6 7 8 9 10
##  $ : chr [1:7] &quot;lundi&quot; &quot;mardi&quot; &quot;mercredi&quot; &quot;jeudi&quot; ...
##  $ : int [1:10, 1:7] 1 2 3 4 5 6 7 8 9 10 ...</code></pre>
</div>
</div>
<div id="selectionner-des-lignes-et-des-colonnes" class="section level2">
<h2><span class="header-section-number">9.2</span> Sélectionner des lignes et des colonnes</h2>
<p>Il est aussi possible d’accéder aux éléments d’un dataframe à partir du numéro de ligne et de colonne, grâce aux crochets :</p>
<center>
<img src="Figures/DF2.png" />
</center>
<ul>
<li><code>base[1,3]</code> <span class="math inline">\(\rightarrow\)</span> <span style="color:red">valeur de la première ligne et de la troisième colonne </span></li>
<li><code>base[2,]</code> <span class="math inline">\(\rightarrow\)</span> <span style="color:blue">toutes les variables pour la 2e observation</span></li>
<li><code>base[,4]</code> <span class="math inline">\(\rightarrow\)</span> <span style="color:green">toutes les observations de la quatrième colonne </span></li>
<li><code>base[,’V6’]</code> <span class="math inline">\(\rightarrow\)</span> <span style="color:cyan">toutes les observations de la variable V6</span></li>
<li><span class="math inline">\(\Rightarrow\)</span> Utile pour sélectionner une partie d’une table : <code>base[1:4, c(3, 6)]</code></li>
</ul>
</div>
<div id="creer-une-nouvelle-fonction-en-r" class="section level2">
<h2><span class="header-section-number">9.3</span> Créer une nouvelle fonction en R</h2>
<p>La fonction est un objet comme les autres, qu’on crée avec l’opérateur d’affectation. Elle est définie par des paramètres et elle se termine par la fonction <code>return()</code>. On reprend l’exemple du calcul de l’IMC</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">calcul_IMC &lt;-<span class="st"> </span><span class="cf">function</span> (poids, taille)
{
  ## La taille est exprimée en mètres
  imc &lt;-<span class="st"> </span>poids <span class="op">/</span><span class="st"> </span>taille <span class="op">^</span><span class="st"> </span><span class="dv">2</span>
  <span class="kw">return</span> (imc)
}
<span class="kw">calcul_IMC</span> (<span class="dt">poids=</span><span class="dv">80</span>,<span class="dt">taille=</span><span class="fl">1.89</span>)</code></pre></div>
<pre><code>## [1] 22.39579</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">calcul_IMC</span> (<span class="dt">poids=</span><span class="dv">60</span>,<span class="dt">taille=</span><span class="fl">1.55</span>)</code></pre></div>
<pre><code>## [1] 24.97399</code></pre>
</div>
<div id="les-boucles-conditionnelles" class="section level2">
<h2><span class="header-section-number">9.4</span> Les boucles conditionnelles</h2>
<p>Les commandes <code>if</code> et <code>else</code> sont bien entendues utilisables. Le “then” n’existe pas : il est implicite après les accolades.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">diag_IMC &lt;-<span class="st"> </span><span class="cf">function</span>(poids,taille)
{
  imc &lt;-<span class="st"> </span>poids <span class="op">/</span><span class="st"> </span>taille <span class="op">^</span><span class="st"> </span><span class="dv">2</span>
  <span class="cf">if</span> (imc <span class="op">&lt;</span><span class="st"> </span><span class="fl">18.5</span>) {diag &lt;-<span class="st"> &quot;maigre&quot;</span>}
  <span class="cf">else</span> <span class="cf">if</span> (imc <span class="op">&lt;</span><span class="st"> </span><span class="dv">25</span>) {diag &lt;-<span class="st"> &quot;normal&quot;</span>}
       <span class="cf">else</span> {diag &lt;-<span class="st"> &quot;surpoids&quot;</span>}
  <span class="kw">return</span> (diag)
}
<span class="kw">diag_IMC</span> (<span class="dt">poids=</span><span class="dv">60</span>,<span class="dt">taille=</span><span class="fl">1.89</span>)</code></pre></div>
<pre><code>## [1] &quot;maigre&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">diag_IMC</span> (<span class="dt">poids=</span><span class="dv">80</span>,<span class="dt">taille=</span><span class="fl">1.89</span>)</code></pre></div>
<pre><code>## [1] &quot;normal&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">diag_IMC</span> (<span class="dt">poids=</span><span class="dv">80</span>,<span class="dt">taille=</span><span class="fl">1.55</span>)</code></pre></div>
<pre><code>## [1] &quot;surpoids&quot;</code></pre>
</div>
<div id="les-boucles" class="section level2">
<h2><span class="header-section-number">9.5</span> Les boucles</h2>
<p>On peut utiliser les boucles classiques : <code>repeat</code>, <code>while</code>, <code>for</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (pp <span class="cf">in</span> <span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">50</span>, <span class="dt">to =</span> <span class="dv">100</span>, <span class="dt">by =</span> <span class="dv">5</span>))
{
  <span class="kw">print</span>(<span class="kw">paste</span> (<span class="st">&quot;Taille = 1,70m, poids =&quot;</span>, pp, <span class="st">&quot;Diagnotic :&quot;</span>,
               <span class="kw">diag_IMC</span> (<span class="dt">poids =</span> pp, <span class="dt">taille =</span> <span class="fl">1.70</span>)))
}</code></pre></div>
<pre><code>## [1] &quot;Taille = 1,70m, poids = 50 Diagnotic : maigre&quot;
## [1] &quot;Taille = 1,70m, poids = 55 Diagnotic : normal&quot;
## [1] &quot;Taille = 1,70m, poids = 60 Diagnotic : normal&quot;
## [1] &quot;Taille = 1,70m, poids = 65 Diagnotic : normal&quot;
## [1] &quot;Taille = 1,70m, poids = 70 Diagnotic : normal&quot;
## [1] &quot;Taille = 1,70m, poids = 75 Diagnotic : surpoids&quot;
## [1] &quot;Taille = 1,70m, poids = 80 Diagnotic : surpoids&quot;
## [1] &quot;Taille = 1,70m, poids = 85 Diagnotic : surpoids&quot;
## [1] &quot;Taille = 1,70m, poids = 90 Diagnotic : surpoids&quot;
## [1] &quot;Taille = 1,70m, poids = 95 Diagnotic : surpoids&quot;
## [1] &quot;Taille = 1,70m, poids = 100 Diagnotic : surpoids&quot;</code></pre>
</div>
<div id="exercices" class="section level2">
<h2><span class="header-section-number">9.6</span> Exercices</h2>
<div id="vecteurs-simples" class="section level3">
<h3><span class="header-section-number">9.6.1</span> Vecteurs simples</h3>
<ul>
<li>Créer trois vecteurs : un numérique, un caractère et un facteur. Vous pouvez vous aider des fonctions <code>c()</code>, <code>rnorm()</code> (génération d’une variable aléatoire selon une loi normale), <code>seq()</code> ou <code>rep()</code></li>
<li>Regrouper ces variables dans un dataframe, puis dans une liste. Dans les deux configurations, afficher la variable contenant les tailles (vtaille). Pour la liste, utiliser les [] et [[]].</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span> (<span class="dt">list =</span> <span class="kw">ls</span> ())

x &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="dv">1</span>, <span class="dv">160</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">60</span>)
x1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Je&quot;</span>, <span class="st">&quot;programme&quot;</span>, <span class="st">&quot;en&quot;</span>, <span class="st">&quot;R&quot;</span>) <span class="co"># Guillemets pour indiquer que c&#39;est une variable textuelle</span>
y &lt;-<span class="st"> </span><span class="kw">seq</span> (<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">10</span>, <span class="dt">by =</span> <span class="dv">1</span>)
z &lt;-<span class="st"> </span><span class="kw">rep</span> (<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">times =</span> <span class="dv">100</span>)
x &lt;-<span class="st"> </span><span class="kw">rnorm</span> (<span class="dt">n =</span> <span class="dv">30</span>)

<span class="co"># création de vecteurs avec la fonction c() = combine</span>
v1 &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">32</span>, <span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">9</span>)

<span class="co"># avec la fonction seq() = sequence, g?n?ralisation de la syntaxe ci-dessus</span>
v2 &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span> , <span class="dt">to =</span> <span class="dv">15</span> , <span class="dt">by =</span> <span class="fl">1.5</span>)

<span class="co"># syntaxe équivalente mais préférable car plus lisible :</span>

v2b &lt;-<span class="st"> </span><span class="kw">seq</span> (<span class="dt">from=</span><span class="dv">1</span>, <span class="dt">to=</span><span class="dv">15</span>, <span class="dt">by=</span><span class="fl">1.5</span>)
v3 &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>

<span class="co"># avec la fonction rep() = répétition</span>
v4 &lt;-<span class="st"> </span><span class="kw">rep</span> (<span class="dt">x =</span> <span class="dv">4</span>, <span class="dt">times =</span> <span class="dv">10</span>)

<span class="co"># ces commandes peuvent être combinées. Pratique pour cr?er des variables &quot;facteur&quot;</span>
v5 &lt;-<span class="st"> </span><span class="kw">rep</span> (<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="fl">1.2</span>, <span class="dv">8</span>, <span class="dv">9</span>), <span class="dt">times =</span> <span class="dv">2</span>)
v6 &lt;-<span class="st"> </span><span class="kw">rep</span> (<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">times =</span> <span class="dv">2</span>)

<span class="co"># vecteurs de type texte ou factor</span>
vtaille &lt;-<span class="st"> </span><span class="kw">rep</span> (<span class="dt">x =</span> <span class="kw">c</span> (<span class="st">&quot;S&quot;</span>, <span class="st">&quot;L&quot;</span>), <span class="dt">times =</span> <span class="dv">5</span>)
vtaille &lt;-<span class="st"> </span><span class="kw">factor</span> (vtaille)

<span class="co"># concaténation de vecteurs</span>
gtaille &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;X&quot;</span>, vtaille, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)
gtaille &lt;-<span class="st"> </span><span class="kw">factor</span> (gtaille)
toutes_taille &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="kw">as.character</span> (vtaille), <span class="kw">as.character</span> (gtaille)) 
toutes_taille &lt;-<span class="st"> </span><span class="kw">as.factor</span> (toutes_taille)
<span class="kw">levels</span> (toutes_taille)</code></pre></div>
<pre><code>## [1] &quot;L&quot;  &quot;S&quot;  &quot;XL&quot; &quot;XS&quot;</code></pre>
</div>
<div id="dataframes-et-listes" class="section level3">
<h3><span class="header-section-number">9.6.2</span> Dataframes et listes</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dataf &lt;-<span class="st"> </span><span class="kw">data.frame</span> (vtaille, v1, v2, v3, v4, v5, v6)
liste &lt;-<span class="st"> </span><span class="kw">list</span> (vtaille, v1, v2, v3, v4, v5, v6)
<span class="kw">names</span>(liste) &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">&quot;vtaille&quot;</span>, <span class="st">&quot;v1&quot;</span>, <span class="st">&quot;v2&quot;</span>, <span class="st">&quot;v3&quot;</span>, <span class="st">&quot;v4&quot;</span>, <span class="st">&quot;v5&quot;</span>, <span class="st">&quot;v6&quot;</span>)

dataf<span class="op">$</span>vtaille</code></pre></div>
<pre><code>##  [1] S L S L S L S L S L
## Levels: L S</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">liste<span class="op">$</span>vtaille</code></pre></div>
<pre><code>##  [1] S L S L S L S L S L
## Levels: L S</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span> (dataf, vtaille, v1, v2, v2b, v3, v4, v5, v6)</code></pre></div>
</div>
<div id="pour-aller-plus-loin-matrices-et-arrays" class="section level3">
<h3><span class="header-section-number">9.6.3</span> Pour aller plus loin : matrices et arrays</h3>
<p>Les matrices et les arrays permettent des calculs rapides et efficaces, et peuvent être très pratiques et optimisent le stockage des données. Ils demandent cependant plus de réflexion en amont quant à leur utilisation, mais . On accède aux éléments avec les [].</p>
<ul>
<li>Créer une matrice à 10 lignes et 10 colonnes remplie avec un tirage aléatoire selon une loi normale centrée réduit.</li>
<li>Créer un hypercube avec la fonction <code>array()</code> avec 10 lignes, 5 colonnes et de profondeur 3, toujours avec un tirage aléatoire selon une loi normale</li>
</ul>
<p>Un hypercube de trois dimensions peut être représenté comme suit : <img src="Figures/grille.jpg" style="width:50.0%" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">50</span>), <span class="dt">ncol =</span> <span class="dv">5</span>, <span class="dt">nrow =</span> <span class="dv">10</span>)
arr &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">rnorm</span>(<span class="dv">150</span>),<span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">5</span>,<span class="dv">3</span>))
mat</code></pre></div>
<pre><code>##             [,1]       [,2]       [,3]        [,4]       [,5]
##  [1,]  0.3610756  2.5675822  2.4221621  1.46129270  0.2130249
##  [2,] -0.6101857 -2.0954367 -1.2714453 -1.91147076 -0.7014542
##  [3,]  2.2812433  0.2751296 -0.3144474 -0.60976341  0.6652407
##  [4,]  0.1279175  0.1486099  0.3999455  0.08459220 -0.4918059
##  [5,] -0.4580187  2.3148112 -2.4088520  0.46281902 -0.1758566
##  [6,] -0.2175542  0.7539436 -1.2749438 -0.08036219  0.3589201
##  [7,] -1.0732313 -0.6855603 -1.1749672  1.41897234 -0.3117300
##  [8,]  0.5098228  0.5323211  0.4900066  2.28524824 -2.1019300
##  [9,]  1.4981268  0.5548422 -0.6673220  1.44838005  0.7207433
## [10,]  1.7691681  0.4959375 -1.2514192  1.65054737  1.7521203</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">arr</code></pre></div>
<pre><code>## , , 1
## 
##              [,1]       [,2]       [,3]       [,4]        [,5]
##  [1,]  0.47298698 -0.6418764  0.8027490 -0.5740054  0.08710635
##  [2,] -0.23420833 -0.3391176 -0.7395008 -0.7252986 -0.92695756
##  [3,]  0.06418473 -1.8164386  1.1183032  0.5245856 -0.09148799
##  [4,] -0.36275935 -0.8586354  0.7157856  0.5146799  1.06563947
##  [5,]  0.32616755  1.5006077 -1.1083954  0.7779787 -1.42238665
##  [6,]  0.63363855 -2.1268687  1.7698992  0.5137530  2.18418400
##  [7,]  1.08559215  0.5212865 -1.2967818  0.3934492  0.40074290
##  [8,] -0.11862777 -0.2644721  1.0921697  1.2629752 -0.53210574
##  [9,] -1.21358177 -0.9405849 -1.2110460 -1.2590402  2.01583386
## [10,]  0.22048319  0.8243695  1.1656064  0.3353269 -0.24045923
## 
## , , 2
## 
##              [,1]       [,2]        [,3]        [,4]        [,5]
##  [1,]  0.46684665  0.4882336 -0.10107853  0.54948830  0.44311887
##  [2,] -0.14877114 -0.5543343  1.14070150 -0.86877078  2.16189833
##  [3,]  1.43418016  2.1114262  0.40596077 -0.06848545 -0.21968101
##  [4,]  0.07205511  1.0507040 -1.55407284  1.46847823  1.57746691
##  [5,]  1.23092745 -0.7069902 -1.08409219 -0.88063519 -0.54603901
##  [6,] -0.60468445  1.0647776  2.78780004 -1.59751971  1.22077183
##  [7,] -0.22445757 -1.9931186 -0.29934468  0.78815164  0.68370612
##  [8,]  1.10261760  0.4519822 -1.15367779  0.93253768 -0.47880508
##  [9,] -0.69675138 -0.3036033  0.08063194  0.67951282 -0.03191382
## [10,]  1.01958926  0.7981853  0.41065762  0.47009540 -0.28868209
## 
## , , 3
## 
##             [,1]        [,2]        [,3]        [,4]        [,5]
##  [1,] -1.4880759  0.24416225  0.60637290  1.23345439  1.06527223
##  [2,]  0.5828252  0.03390540 -1.33532291 -0.63877738 -0.78981553
##  [3,] -0.3586157  0.03100845  0.69679269  0.86064434  1.74407117
##  [4,] -0.2624262 -1.79303812  0.01484453 -0.66486893 -0.36579424
##  [5,] -0.3231134 -0.04206434  1.23867674 -1.11837202 -0.36118153
##  [6,]  0.2551275  0.12112221 -0.70194404 -1.29791782  0.07013609
##  [7,] -0.1426661 -1.57097082 -0.31911325  0.55845664 -0.38006319
##  [8,] -1.8721762  0.87420480  0.84498799 -0.68207785  0.64160310
##  [9,] -2.3202807 -0.51995390 -0.74742692  0.88984651 -1.64068649
## [10,]  2.1697890 -0.34571632 -1.06146547  0.01147565 -0.13321144</code></pre>
<p><em>Pourquoi s’embêter avec ça ?</em> Parce qu’on peut appliquer des fonctions facilement sur les lignes, colonnes et autres dimensions grâce à la fonction <code>apply()</code>. Exemple : résultats de validations croisées par bloc, simulations de loi selon différents paramètres. Et on calcule facilement des statistiques “marginales”.</p>
<p>Par, exemple, sur une matrice, on peut calculer des statistiques par lignes :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(mat, <span class="dt">MARGIN =</span> <span class="dv">1</span>, <span class="dt">FUN=</span>mean)</code></pre></div>
<pre><code>##  [1]  1.40502750 -1.31799854  0.45948057  0.05385187 -0.05301942
##  [6] -0.09199931 -0.36530330  0.34309374  0.71095407  0.88327081</code></pre>
<p>Ou par colonnes :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(mat, <span class="dt">MARGIN =</span> <span class="dv">2</span>, <span class="dt">FUN=</span>mean)</code></pre></div>
<pre><code>## [1]  0.418836415  0.486218037 -0.505128262  0.621025556 -0.007272751</code></pre>
<p>Sur notre hypercube de type <code>array</code>, on peut aussi calculer des stats sur ses différentes dimensions :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span> (arr, <span class="dt">MARGIN =</span> <span class="dv">3</span>, <span class="dt">FUN=</span>mean)</code></pre></div>
<pre><code>## [1]  0.06690897  0.25373988 -0.16976714</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span> (arr, <span class="dt">MARGIN =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">FUN =</span> mean)</code></pre></div>
<pre><code>##             [,1]       [,2]        [,3]
## [1,]  0.08738759 0.36515517 -0.37596124
## [2,] -0.41417300 0.24072625 -0.29673404
## [3,]  0.23087890 0.06334858 -0.07635977
## [4,]  0.17644042 0.14728529 -0.08481365
## [5,]  0.25401094 0.45218411 -0.01496698</code></pre>
<p><strong>Le coin du capitaine [ ]</strong> <img src="../Figures/CapHookImage.png" style="width:10.0%" /></p>
<p>Le crochet, c’est comme le capitaine du même nom : personne ne l’aime, mais sans lui, pas de Peter Pan, pas de Neverland ! Moralité, on s’en sert beacoup pour pimenter les codes ! On peut utiliser les crochets pour accéder aux éléments des matrices/arrays et dataframe/listes.</p>
<ul>
<li>Matrices et arrays</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat [<span class="dv">1</span>,<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] 0.3610756</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat [<span class="dv">1</span>,]</code></pre></div>
<pre><code>## [1] 0.3610756 2.5675822 2.4221621 1.4612927 0.2130249</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat [,<span class="dv">1</span>]</code></pre></div>
<pre><code>##  [1]  0.3610756 -0.6101857  2.2812433  0.1279175 -0.4580187 -0.2175542
##  [7] -1.0732313  0.5098228  1.4981268  1.7691681</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">arr [<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] 0.472987</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">arr [<span class="dv">1</span>,,]</code></pre></div>
<pre><code>##             [,1]       [,2]       [,3]
## [1,]  0.47298698  0.4668467 -1.4880759
## [2,] -0.64187644  0.4882336  0.2441622
## [3,]  0.80274903 -0.1010785  0.6063729
## [4,] -0.57400544  0.5494883  1.2334544
## [5,]  0.08710635  0.4431189  1.0652722</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">arr [,,<span class="dv">1</span>]</code></pre></div>
<pre><code>##              [,1]       [,2]       [,3]       [,4]        [,5]
##  [1,]  0.47298698 -0.6418764  0.8027490 -0.5740054  0.08710635
##  [2,] -0.23420833 -0.3391176 -0.7395008 -0.7252986 -0.92695756
##  [3,]  0.06418473 -1.8164386  1.1183032  0.5245856 -0.09148799
##  [4,] -0.36275935 -0.8586354  0.7157856  0.5146799  1.06563947
##  [5,]  0.32616755  1.5006077 -1.1083954  0.7779787 -1.42238665
##  [6,]  0.63363855 -2.1268687  1.7698992  0.5137530  2.18418400
##  [7,]  1.08559215  0.5212865 -1.2967818  0.3934492  0.40074290
##  [8,] -0.11862777 -0.2644721  1.0921697  1.2629752 -0.53210574
##  [9,] -1.21358177 -0.9405849 -1.2110460 -1.2590402  2.01583386
## [10,]  0.22048319  0.8243695  1.1656064  0.3353269 -0.24045923</code></pre>
<ul>
<li>dataframes et listes :</li>
</ul>
<p>Pour les dataframes, le fonctionnement est le même que pour les matrices. Pour les listes, une paire de crochet renvoie un résultat sous forme de liste, un double crochet renvoie le résultat sous sa forme naturelle (ex : vecteur ou matrice).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span> (liste [<span class="dv">1</span>])</code></pre></div>
<pre><code>## List of 1
##  $ vtaille: Factor w/ 2 levels &quot;L&quot;,&quot;S&quot;: 2 1 2 1 2 1 2 1 2 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span> (liste [[<span class="dv">1</span>]])</code></pre></div>
<pre><code>##  Factor w/ 2 levels &quot;L&quot;,&quot;S&quot;: 2 1 2 1 2 1 2 1 2 1</code></pre>
</div>
<div id="inspection-dun-objet-la-regression" class="section level3">
<h3><span class="header-section-number">9.6.4</span> Inspection d’un objet : la régression</h3>
<p><img src="Débuter_avec_R_et_Rstudio_files/figure-html/unnamed-chunk-80-1.png" width="576" /></p>
<p>La régression linéaire consiste à exprimer une variable Y en fonction d’une variable X dans une fonction linéaire. C’est à dire qu’on cherche a et b tels que : <span class="math display">\[ Y = a \cdot X + b + \epsilon\]</span> où <span class="math inline">\(\epsilon\)</span> est le résidu de la régression. On utilise dans cet exemple la table des iris de Fisher, existant dans R base qu’il suffit d’appeler avec <code>data(iris)</code> (il existe d’autres dataframe inclus dans les packages et qui sont utilisés en exemple dans l’aide).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span> (<span class="st">&quot;iris&quot;</span>)
<span class="kw">str</span> (iris)</code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>Faire la régression de la Sepal.Length sur Petal.length à l’aide de la fonction <code>lm()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lm</span> (<span class="dt">data =</span> iris, <span class="dt">formula =</span> Sepal.Length <span class="op">~</span><span class="st"> </span>Petal.Length)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Sepal.Length ~ Petal.Length, data = iris)
## 
## Coefficients:
##  (Intercept)  Petal.Length  
##       4.3066        0.4089</code></pre>
<p>On a les paramètres a et b mais on aimerait en savoir plus… Au moins la qualité d’ajustement (le <span class="math inline">\(R^2\)</span> par exemple), et un graphique des résidus pour détecter une éventuelle structure. Pour cela, stocker le résultat dans un nouvel objet, et explorez-le avec les fonctions <code>str()</code>, <code>summary()</code> et <code>plot()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg &lt;-<span class="st"> </span><span class="kw">lm</span>(<span class="dt">data =</span> iris, <span class="dt">formula =</span> Sepal.Length <span class="op">~</span><span class="st"> </span>Petal.Length)
<span class="kw">str</span> (reg)</code></pre></div>
<pre><code>## List of 12
##  $ coefficients : Named num [1:2] 4.307 0.409
##   ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;(Intercept)&quot; &quot;Petal.Length&quot;
##  $ residuals    : Named num [1:150] 0.2209 0.0209 -0.1382 -0.32 0.1209 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:150] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ effects      : Named num [1:150] -71.566 8.812 -0.155 -0.337 0.104 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:150] &quot;(Intercept)&quot; &quot;Petal.Length&quot; &quot;&quot; &quot;&quot; ...
##  $ rank         : int 2
##  $ fitted.values: Named num [1:150] 4.88 4.88 4.84 4.92 4.88 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:150] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ assign       : int [1:2] 0 1
##  $ qr           :List of 5
##   ..$ qr   : num [1:150, 1:2] -12.2474 0.0816 0.0816 0.0816 0.0816 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:150] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##   .. .. ..$ : chr [1:2] &quot;(Intercept)&quot; &quot;Petal.Length&quot;
##   .. ..- attr(*, &quot;assign&quot;)= int [1:2] 0 1
##   ..$ qraux: num [1:2] 1.08 1.1
##   ..$ pivot: int [1:2] 1 2
##   ..$ tol  : num 1e-07
##   ..$ rank : int 2
##   ..- attr(*, &quot;class&quot;)= chr &quot;qr&quot;
##  $ df.residual  : int 148
##  $ xlevels      : Named list()
##  $ call         : language lm(formula = Sepal.Length ~ Petal.Length, data = iris)
##  $ terms        :Classes &#39;terms&#39;, &#39;formula&#39;  language Sepal.Length ~ Petal.Length
##   .. ..- attr(*, &quot;variables&quot;)= language list(Sepal.Length, Petal.Length)
##   .. ..- attr(*, &quot;factors&quot;)= int [1:2, 1] 0 1
##   .. .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. .. ..$ : chr [1:2] &quot;Sepal.Length&quot; &quot;Petal.Length&quot;
##   .. .. .. ..$ : chr &quot;Petal.Length&quot;
##   .. ..- attr(*, &quot;term.labels&quot;)= chr &quot;Petal.Length&quot;
##   .. ..- attr(*, &quot;order&quot;)= int 1
##   .. ..- attr(*, &quot;intercept&quot;)= int 1
##   .. ..- attr(*, &quot;response&quot;)= int 1
##   .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_GlobalEnv&gt; 
##   .. ..- attr(*, &quot;predvars&quot;)= language list(Sepal.Length, Petal.Length)
##   .. ..- attr(*, &quot;dataClasses&quot;)= Named chr [1:2] &quot;numeric&quot; &quot;numeric&quot;
##   .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;Sepal.Length&quot; &quot;Petal.Length&quot;
##  $ model        :&#39;data.frame&#39;:   150 obs. of  2 variables:
##   ..$ Sepal.Length: num [1:150] 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##   ..$ Petal.Length: num [1:150] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##   ..- attr(*, &quot;terms&quot;)=Classes &#39;terms&#39;, &#39;formula&#39;  language Sepal.Length ~ Petal.Length
##   .. .. ..- attr(*, &quot;variables&quot;)= language list(Sepal.Length, Petal.Length)
##   .. .. ..- attr(*, &quot;factors&quot;)= int [1:2, 1] 0 1
##   .. .. .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. .. .. ..$ : chr [1:2] &quot;Sepal.Length&quot; &quot;Petal.Length&quot;
##   .. .. .. .. ..$ : chr &quot;Petal.Length&quot;
##   .. .. ..- attr(*, &quot;term.labels&quot;)= chr &quot;Petal.Length&quot;
##   .. .. ..- attr(*, &quot;order&quot;)= int 1
##   .. .. ..- attr(*, &quot;intercept&quot;)= int 1
##   .. .. ..- attr(*, &quot;response&quot;)= int 1
##   .. .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_GlobalEnv&gt; 
##   .. .. ..- attr(*, &quot;predvars&quot;)= language list(Sepal.Length, Petal.Length)
##   .. .. ..- attr(*, &quot;dataClasses&quot;)= Named chr [1:2] &quot;numeric&quot; &quot;numeric&quot;
##   .. .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;Sepal.Length&quot; &quot;Petal.Length&quot;
##  - attr(*, &quot;class&quot;)= chr &quot;lm&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span> (reg)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Sepal.Length ~ Petal.Length, data = iris)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.24675 -0.29657 -0.01515  0.27676  1.00269 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   4.30660    0.07839   54.94   &lt;2e-16 ***
## Petal.Length  0.40892    0.01889   21.65   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4071 on 148 degrees of freedom
## Multiple R-squared:   0.76,  Adjusted R-squared:  0.7583 
## F-statistic: 468.6 on 1 and 148 DF,  p-value: &lt; 2.2e-16</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span> (reg)</code></pre></div>
<p><img src="Débuter_avec_R_et_Rstudio_files/figure-html/unnamed-chunk-83-1.png" width="576" /><img src="Débuter_avec_R_et_Rstudio_files/figure-html/unnamed-chunk-83-2.png" width="576" /><img src="Débuter_avec_R_et_Rstudio_files/figure-html/unnamed-chunk-83-3.png" width="576" /><img src="Débuter_avec_R_et_Rstudio_files/figure-html/unnamed-chunk-83-4.png" width="576" /></p>
<p>Les <strong>méthodes</strong> summary, print et plot sont implémentées pour tous les objets en R, et on peut les utiliser pour avoir un premier aperçu de ce que l’on obtient avec la fonction.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sauvegarder-son-travail.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
